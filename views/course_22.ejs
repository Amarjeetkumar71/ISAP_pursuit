<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }

        .container {
            width: 80%;
            margin: auto;
            overflow: hidden;
            margin-bottom: 50px;
        }

        h1 {
            text-align: center;
            color: #333;
            font-size: 30px;
        }



        /*.course {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
            transition: transform 0.3s ease-in-out;
        }

        .course:hover {
            transform: scale(1.05);
        }

        .course img {
            width: 200px;
            height:500px;
            object-fit: cover;
        }*/
        .course {
            background-color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px solid black;
            padding-top: 20px;
            padding-bottom: 20px;
            border-radius: 1rem;
            cursor: pointer;
            transition: 0.2s ease-in-out;
            width: auto;

        }

        .course:hover {
            transform: scale(0.9, 0.9);
            transition: 0.2s ease-in-out;
        }

        .course-info {
            padding: 15px;
            font-size: 35px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;

        }

        .course-title {
            font-size: 38px;
            margin-bottom: 10px;
            color: #333;
        }

        .course-description {
            font-size: 24px;
            color: #666;
            margin-bottom: 10px;
        }

        .enroll-button {
            display: block;
            width: 100%;
            padding: 10px;
            /* Adjust padding as needed */
            background-color: #4CAF50;
            color: #fff;
            text-align: center;
            text-decoration: none;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease-in-out;
        }

        .enroll-button:hover {
            background-color: #45a049;
        }

        .delete-button {
            display: block;
            width: 100%;
            /* Adjust the width as needed */
            padding: 10px;
            /* Adjust padding as needed */
            background-color: #ff0000;
            /* Example color */
            color: #fff;
            text-align: center;
            text-decoration: none;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease-in-out;
        }

        .delete-button:hover {
            background-color: #cc0000;
            /* Example color */
        }
    </style>
    <!-- <link rel="stylesheet" href="/css/style.css"> -->
    <link rel="stylesheet" href="/css/style3.css">
    <title>Your Course List</title>
</head>

<body>
    <nav>
        <div class="logo">
            <a href="https://www.pursuitsoftware.com/" target="_blank"> <img src="/img_src/logo_pursuit.jpg" alt="Logo">
            </a>
            <h2 style="color: white;">Information Security Awareness Program</h2>
        </div>
        <ul class="menu">
            <li><a href="/betutor">Be a Tutor</a></li>
            <li><a href="/logout">Logout</a></li>

        </ul>
        <div class="user-profile">
            <a href="#"> <img src="/img_src/user_icon.png" alt="User Profile"> </a>
            <span>Welcome,<%= user_name %></span>
        </div>
    </nav>

    <div class="container">
        <h1>Course List</h1>

        <div class="course-grid">
            <!-- Course 1 -->

            <!--here goes the courses-->

        </div>
    </div>

    <!-- ... (your existing HTML code) ... -->

    <script>
        const email = '<%= email %>';
        document.addEventListener("DOMContentLoaded", function () {
            // Fetch data from the API
            fetch(`/get_tutor_courses?email=${email}`)
                .then(response => response.json())
                .then(data => {
                    // Get the container element
                    const courseGrid = document.querySelector('.course-grid');

                    // Iterate through the received courses and create HTML elements for each
                    data.forEach(courseData => {
                        const courseContainer = document.createElement('div');
                        courseContainer.className = 'course';

                        const courseInfo = document.createElement('div');
                        courseInfo.className = 'course-info';

                        const courseTitle = document.createElement('div');
                        courseTitle.className = 'course-title';
                        courseTitle.textContent = courseData.course.name;

                        const courseDescription = document.createElement('div');
                        courseDescription.className = 'course-description';
                        courseDescription.textContent = courseData.course.title;

                        const enrollButton = document.createElement('a');
                        enrollButton.className = 'enroll-button';
                        enrollButton.textContent = 'View Course';
                        enrollButton.href = `/show_course?course_id=${courseData._id}`;


                        const deleteButton = document.createElement('button');
                        deleteButton.className = 'enroll-button';
                        deleteButton.textContent = 'Delete Course';
                        deleteButton.addEventListener('click', function () {
                            // Make API call to delete the course
                            fetch(`/delete_course?course_id=${courseData._id}`)
                                .then(response => response.json())
                                .then(data => {
                                    // Remove the course container from the DOM if deletion is successful
                                    if (data.success) {
                                        location.reload();
                                    } else {
                                        console.error('Error deleting course:', data.error);
                                    }
                                })
                                .catch(error => console.error('Error deleting course:', error));
                        });


                        const svgIcon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                        svgIcon.setAttribute("xmlns", "http://www.w3.org/2000/svg");
                        svgIcon.setAttribute("width", "24");
                        svgIcon.setAttribute("height", "24");
                        svgIcon.setAttribute("viewBox", "0 0 24 24");
                        svgIcon.setAttribute("fill", "none");
                        svgIcon.setAttribute("stroke", "currentColor");
                        svgIcon.setAttribute("stroke-width", "2");
                        svgIcon.setAttribute("stroke-linecap", "round");
                        svgIcon.setAttribute("stroke-linejoin", "round");
                        svgIcon.setAttribute("class", "lucide lucide-move-right");

                        const path1 = document.createElementNS("http://www.w3.org/2000/svg", "path");
                        path1.setAttribute("d", "M18 8L22 12L18 16");
                        const path2 = document.createElementNS("http://www.w3.org/2000/svg", "path");
                        path2.setAttribute("d", "M2 12H22");

                        svgIcon.appendChild(path1);
                        svgIcon.appendChild(path2);

                        deleteButton.appendChild(svgIcon);
                        enrollButton.appendChild(svgIcon);

                        // viewButton.style.marginBottom = '5px'; // Adjust the value as needed
                        // deleteButton.style.marginTop = '5px'; // Adjust the value as needed
                        const buttonSpacer = document.createElement('div');
                        buttonSpacer.style.height = '10px'; // Adjust the height as needed

                        // Append elements to the course container
                        courseInfo.appendChild(courseTitle);
                        courseInfo.appendChild(courseDescription);
                        courseInfo.appendChild(enrollButton);
                        courseInfo.appendChild(buttonSpacer);
                        courseInfo.appendChild(deleteButton);

                        courseContainer.appendChild(courseInfo);

                        // Append the course container to the course grid
                        courseGrid.appendChild(courseContainer);
                    });
                })
                .catch(error => console.error('Error fetching courses:', error));
        });
    </script>

    <!-- ... (your existing HTML code) ... -->


</body>

</html>